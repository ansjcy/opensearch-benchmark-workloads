{% import "benchmark.helpers" as benchmark with context %}

{% set index_body = 'index.json' %}


{
  "version": 2,
  "description": "HTTP server log data",
  "#TODO": "Replace index definitions with a template after setting the workload version to 2. Explicit index definitions are not necessary anymore.",
  "indices": [
    {
      "name": "logs-191998",
      "body": "{{ index_body }}"
    }
  ],
  "corpora": [
      {%- if ingest_pipeline is defined and ingest_pipeline == "grok" %}
        {
          "name": "http_logs_unparsed",
          "base-url": "https://opensearch-benchmark-workloads.s3.amazonaws.com/corpora/http_logs",
          "documents": [
          {
            "target-index": "logs-191998",
            "source-file": "documents-191998.unparsed.json.bz2",
            "document-count": 9697882,
            "compressed-bytes": 47290776,
            "uncompressed-bytes": 1088378738
          }
        ]
      }
    {%- else %}
      {
        "name": "http_logs",
        "base-url": "https://opensearch-benchmark-workloads.s3.amazonaws.com/corpora/http_logs",
        "documents": [
          {
            "target-index": "logs-191998",
            "source-file": "documents-191998.json.bz2",
            "document-count": 9697882,
            "compressed-bytes": 49546887,
            "uncompressed-bytes": 1301732149
          }
        ]
      }
    {%- endif %}
  ],
  "operations": [
    {{ benchmark.collect(parts="operations/*.json") }}
  ],
  "test_procedures": [
    {{ benchmark.collect(parts="test_procedures/*.json") }}
  ]
}
